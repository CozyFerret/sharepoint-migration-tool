security-scan:
  runs-on: ubuntu-latest
  steps:
  - uses: actions/checkout@v3
  - name: Set up Python
    uses: actions/setup-python@v4
    with:
      python-version: '3.9'
  - name: Install dependencies
    run: |
      python -m pip install --upgrade pip
      pip install bandit
  - name: Scan with bandit
    run: |
      # Option 1: Use the config file approach (recommended)
      # Make sure you've added the .bandit file to your repository
      bandit -r . -x ./tests,./venv -c .bandit -f txt -o bandit-output.txt
      
      # Option 2: Use command line to ignore specific tests
      # bandit -r . -x ./tests,./venv -s B404,B603,B607,B110 -f txt -o bandit-output.txt
      
      # Option 3: Allow the build to proceed despite issues
      # bandit -r . -x ./tests,./venv || true
      
      # Display the output for review
      cat bandit-output.txt
  - name: Upload security scan results
    uses: actions/upload-artifact@v3
    with:
      name: security-scan-results
      path: bandit-output.txt